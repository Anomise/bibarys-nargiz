<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–µ—Ä–¥—Ü–µ –°–∞—Ç–ø–∞–µ–≤–∞ - –í–∏–∑—É–∞–ª—å–Ω–∞—è –ù–æ–≤–µ–ª–ª–∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Caveat:wght@700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: #0a0a0f;
            color: #fff;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }

        /* Platform Selection */
        #platform-select {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .platform-title {
            font-family: 'Caveat', cursive;
            font-size: 4rem;
            color: #ff6b9d;
            text-shadow: 0 0 30px rgba(255, 107, 157, 0.5);
            margin-bottom: 20px;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 30px rgba(255, 107, 157, 0.5); }
            to { text-shadow: 0 0 50px rgba(255, 107, 157, 0.8), 0 0 80px rgba(255, 107, 157, 0.4); }
        }

        .platform-subtitle {
            font-size: 1.2rem;
            color: #a0a0a0;
            margin-bottom: 50px;
        }

        .platform-buttons {
            display: flex;
            gap: 40px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .platform-btn {
            width: 200px;
            height: 250px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 107, 157, 0.3);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }

        .platform-btn:hover {
            background: rgba(255, 107, 157, 0.1);
            border-color: #ff6b9d;
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(255, 107, 157, 0.2);
        }

        .platform-icon {
            font-size: 80px;
        }

        .platform-label {
            font-size: 1.3rem;
            font-weight: 600;
            color: #fff;
        }

        /* Main Game Container */
        #game-container {
            display: none;
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        /* Backgrounds */
        .background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            transition: opacity 0.5s ease;
        }

        .bg-bus-stop {
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 100%);
        }

        .bg-bus-stop::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 30%;
            background: linear-gradient(to top, #555 0%, #777 100%);
        }

        .bg-bus {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }

        .bg-college {
            background: linear-gradient(to bottom, #74b9ff 0%, #a29bfe 100%);
        }

        .bg-evening {
            background: linear-gradient(to bottom, #2c3e50 0%, #fd79a8 30%, #e17055 60%, #2d3436 100%);
        }

        .bg-night {
            background: linear-gradient(to bottom, #0c0c1e 0%, #1a1a3e 50%, #2d2d5a 100%);
        }

        .bg-park {
            background: linear-gradient(to bottom, #55efc4 0%, #00b894 100%);
        }

        .bg-cafe {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
        }

        .bg-rain {
            background: linear-gradient(to bottom, #636e72 0%, #2d3436 100%);
        }

        /* Character Display */
        #character-display {
            position: absolute;
            bottom: 25%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 50px;
            z-index: 10;
        }

        .character {
            text-align: center;
            transition: all 0.3s ease;
        }

        .character-sprite {
            width: 200px;
            height: 350px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
        }

        .character-avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 4px solid #fff;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            margin-bottom: 10px;
        }

        .nargiza-avatar {
            background: linear-gradient(135deg, #ff6b9d, #c44569);
        }

        .arif-avatar {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
        }

        .character-name-tag {
            background: rgba(0, 0, 0, 0.7);
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        /* Dialog Box */
        #dialog-box {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.95), rgba(0, 0, 0, 0.85));
            border-top: 3px solid #ff6b9d;
            padding: 20px;
            min-height: 25%;
            z-index: 20;
        }

        #speaker-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #ff6b9d;
            margin-bottom: 10px;
            display: inline-block;
            background: rgba(255, 107, 157, 0.2);
            padding: 5px 20px;
            border-radius: 20px;
        }

        #dialog-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #fff;
            min-height: 80px;
        }

        #continue-hint {
            position: absolute;
            bottom: 15px;
            right: 20px;
            color: #888;
            font-size: 0.9rem;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Choices */
        #choices-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            flex-direction: column;
            gap: 15px;
            z-index: 30;
            width: 90%;
            max-width: 600px;
        }

        .choice-btn {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.9), rgba(196, 69, 105, 0.9));
            border: none;
            padding: 20px 30px;
            font-size: 1.1rem;
            color: #fff;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            text-align: left;
            box-shadow: 0 5px 20px rgba(255, 107, 157, 0.3);
        }

        .choice-btn:hover {
            transform: translateX(10px);
            box-shadow: 0 10px 30px rgba(255, 107, 157, 0.5);
            background: linear-gradient(135deg, rgba(255, 127, 177, 0.95), rgba(216, 89, 125, 0.95));
        }

        .choice-btn::before {
            content: '‚ñ∏ ';
            opacity: 0;
            transition: opacity 0.3s;
        }

        .choice-btn:hover::before {
            opacity: 1;
        }

        /* UI Elements */
        #game-ui {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 50;
        }

        .ui-btn {
            width: 50px;
            height: 50px;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            color: #fff;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ui-btn:hover {
            background: rgba(255, 107, 157, 0.7);
            border-color: #ff6b9d;
            transform: scale(1.1);
        }

        /* Affection Meter */
        #affection-container {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px 20px;
            border-radius: 15px;
            z-index: 50;
            border: 2px solid rgba(255, 107, 157, 0.3);
        }

        #affection-label {
            font-size: 0.9rem;
            color: #ff6b9d;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #affection-bar {
            width: 150px;
            height: 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
        }

        #affection-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b9d, #ff8fab);
            width: 30%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        /* Chapter Title */
        #chapter-title {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Caveat', cursive;
            font-size: 4rem;
            color: #fff;
            text-shadow: 0 0 30px rgba(255, 107, 157, 0.8);
            opacity: 0;
            z-index: 100;
            text-align: center;
            pointer-events: none;
        }

        /* Menu */
        #menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 200;
        }

        .menu-content {
            text-align: center;
        }

        .menu-title {
            font-family: 'Caveat', cursive;
            font-size: 3rem;
            color: #ff6b9d;
            margin-bottom: 40px;
        }

        .menu-btn {
            display: block;
            width: 250px;
            margin: 15px auto;
            padding: 15px 30px;
            background: transparent;
            border: 2px solid #ff6b9d;
            color: #fff;
            font-size: 1.2rem;
            font-family: 'Nunito', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 30px;
        }

        .menu-btn:hover {
            background: #ff6b9d;
            transform: scale(1.05);
        }

        /* Ending Screen */
        #ending-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 300;
            flex-direction: column;
        }

        .ending-good {
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 50%, #6c5ce7 100%);
        }

        .ending-bad {
            background: linear-gradient(135deg, #2d3436 0%, #636e72 50%, #2d3436 100%);
        }

        .ending-title {
            font-family: 'Caveat', cursive;
            font-size: 4rem;
            color: #fff;
            text-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
        }

        .ending-subtitle {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 50px;
            max-width: 600px;
            text-align: center;
            line-height: 1.6;
        }

        /* Effects */
        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .slide-up {
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Mobile Styles */
        .mobile-mode #character-display {
            bottom: 30%;
        }

        .mobile-mode .character-sprite {
            width: 120px;
            height: 200px;
        }

        .mobile-mode .character-avatar {
            width: 80px;
            height: 80px;
            font-size: 35px;
        }

        .mobile-mode #dialog-box {
            min-height: 30%;
            padding: 15px;
        }

        .mobile-mode #speaker-name {
            font-size: 1rem;
        }

        .mobile-mode #dialog-text {
            font-size: 0.95rem;
        }

        .mobile-mode .choice-btn {
            padding: 15px 20px;
            font-size: 1rem;
        }

        .mobile-mode #affection-container {
            top: 10px;
            left: 10px;
            padding: 10px 15px;
        }

        .mobile-mode #affection-bar {
            width: 100px;
        }

        .mobile-mode .ui-btn {
            width: 40px;
            height: 40px;
            font-size: 1rem;
        }

        .mobile-mode .platform-title {
            font-size: 2.5rem;
        }

        .mobile-mode .platform-btn {
            width: 150px;
            height: 180px;
        }

        .mobile-mode .platform-icon {
            font-size: 50px;
        }

        /* Typewriter effect */
        .typewriter {
            overflow: hidden;
            border-right: 2px solid transparent;
        }

        /* Snow/Particles */
        .particle {
            position: absolute;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: fall linear infinite;
        }

        @keyframes fall {
            0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        /* Hearts animation */
        .heart-float {
            position: absolute;
            font-size: 2rem;
            animation: floatUp 2s ease-out forwards;
            pointer-events: none;
        }

        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-100px) scale(1.5); }
        }

        /* Scene transition */
        #scene-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 500;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        #scene-transition.active {
            opacity: 1;
            pointer-events: all;
        }
    </style>
</head>
<body>
    <!-- Scene Transition -->
    <div id="scene-transition"></div>

    <!-- Platform Selection -->
    <div id="platform-select">
        <h1 class="platform-title">–°–µ—Ä–¥—Ü–µ –°–∞—Ç–ø–∞–µ–≤–∞</h1>
        <p class="platform-subtitle">–í–∏–∑—É–∞–ª—å–Ω–∞—è –Ω–æ–≤–µ–ª–ª–∞ ‚Ä¢ –£–ª—ã—Ç–∞—É—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</p>
        <div class="platform-buttons">
            <button class="platform-btn" onclick="selectPlatform('desktop')">
                <span class="platform-icon">üñ•Ô∏è</span>
                <span class="platform-label">–ö–æ–º–ø—å—é—Ç–µ—Ä</span>
            </button>
            <button class="platform-btn" onclick="selectPlatform('mobile')">
                <span class="platform-icon">üì±</span>
                <span class="platform-label">–¢–µ–ª–µ—Ñ–æ–Ω</span>
            </button>
        </div>
    </div>

    <!-- Game Container -->
    <div id="game-container">
        <!-- Background -->
        <div id="background" class="background bg-bus-stop"></div>
        
        <!-- Affection Meter -->
        <div id="affection-container">
            <div id="affection-label">üíï –°–∏–º–ø–∞—Ç–∏—è –ù–∞—Ä–≥–∏–∑—ã</div>
            <div id="affection-bar">
                <div id="affection-fill"></div>
            </div>
        </div>

        <!-- UI Buttons -->
        <div id="game-ui">
            <button class="ui-btn" onclick="toggleMenu()" title="–ú–µ–Ω—é">‚ò∞</button>
            <button class="ui-btn" onclick="saveGame()" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å">üíæ</button>
            <button class="ui-btn" onclick="toggleAuto()" id="auto-btn" title="–ê–≤—Ç–æ">‚ñ∂Ô∏è</button>
        </div>

        <!-- Chapter Title -->
        <div id="chapter-title"></div>

        <!-- Character Display -->
        <div id="character-display"></div>

        <!-- Dialog Box -->
        <div id="dialog-box" onclick="advanceDialog()">
            <div id="speaker-name">???</div>
            <div id="dialog-text"></div>
            <div id="continue-hint">‚ñº –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</div>
        </div>

        <!-- Choices Container -->
        <div id="choices-container"></div>
    </div>

    <!-- Menu Overlay -->
    <div id="menu-overlay">
        <div class="menu-content">
            <h2 class="menu-title">–ú–µ–Ω—é</h2>
            <button class="menu-btn" onclick="toggleMenu()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
            <button class="menu-btn" onclick="saveGame()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button class="menu-btn" onclick="loadGame()">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
            <button class="menu-btn" onclick="restartGame()">–ù–∞—á–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞</button>
        </div>
    </div>

    <!-- Ending Screen -->
    <div id="ending-screen">
        <h1 class="ending-title"></h1>
        <p class="ending-subtitle"></p>
        <button class="menu-btn" onclick="restartGame()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
    </div>

    <script>
        // Game State
        let gameState = {
            platform: null,
            currentScene: 0,
            affection: 30,
            chapter: 1,
            flags: {},
            autoMode: false,
            dialogIndex: 0
        };

        // Story Data
        const story = [
            // Chapter 1: The Beginning
            {
                type: "chapter",
                title: "–ì–ª–∞–≤–∞ 1: –ê–≤—Ç–æ–±—É—Å 101",
                background: "bg-bus-stop"
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–û—á–µ—Ä–µ–¥–Ω–æ–µ —É—Ç—Ä–æ –≤ –°–∞—Ç–ø–∞–µ–≤–µ... –û–ø—è—Ç—å —ç—Ç–æ—Ç –∞–≤—Ç–æ–±—É—Å 101 –¥–æ –ñ–µ–∑–∫–∞–∑–≥–∞–Ω–∞. –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ ‚Äî –ø–æ–µ–∑–¥–∫–∞ –≤ –ü–æ–ª–∏—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∫–æ–ª–ª–µ–¥–∂.",
                background: "bg-bus-stop",
                characters: []
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–£–ª—ã—Ç–∞—É—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å... –ù–µ —Å–∞–º–æ–µ —Ä–æ–º–∞–Ω—Ç–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ —Å–≤–µ—Ç–µ, –Ω–æ —ç—Ç–æ –º–æ–π –¥–æ–º. –°—Ç–æ—é –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ, –∂–¥—É –º–∞—Ä—à—Ä—É—Ç–∫—É.",
                background: "bg-bus-stop",
                characters: []
            },
            {
                type: "dialog",
                speaker: "–ê—Ä–∏—Ñ",
                text: "–≠–π, –ë–∏–±–∞—Ä—ã—Å! –ß–µ–≥–æ —Ç–∞–∫–æ–π –∑–∞–¥—É–º—á–∏–≤—ã–π —Å —É—Ç—Ä–∞ –ø–æ—Ä–∞–Ω—å—à–µ?",
                background: "bg-bus-stop",
                characters: ["arif"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–û, –ê—Ä–∏—Ñ! –î–∞ —Ç–∞–∫, –Ω–µ –≤—ã—Å–ø–∞–ª—Å—è –ø—Ä–æ—Å—Ç–æ. –û–ø—è—Ç—å –¥–æ –Ω–æ—á–∏ –ø—Ä–æ–µ–∫—Ç –¥–µ–ª–∞–ª.",
                background: "bg-bus-stop",
                characters: ["arif"]
            },
            {
                type: "dialog",
                speaker: "–ê—Ä–∏—Ñ",
                text: "–•–∞—Ö, —Ç–∏–ø–∏—á–Ω—ã–π —Ç—ã! –°–ª—É—à–∞–π, –∞ —Ç—ã –∑–∞–º–µ—Ç–∏–ª —Ç—É –¥–µ–≤—É—à–∫—É? –ö–æ—Ç–æ—Ä–∞—è —Ç–æ–∂–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –Ω–∞ 101-–º –µ–∑–¥–∏—Ç?",
                background: "bg-bus-stop",
                characters: ["arif"]
            },
            {
                type: "choice",
                question: "–ß—Ç–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –ê—Ä–∏—Ñ—É?",
                choices: [
                    { text: "–ö–∞–∫—É—é –¥–µ–≤—É—à–∫—É? –ù–µ –∑–∞–º–µ—á–∞–ª –Ω–∏–∫–æ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ.", next: 7, affection: 0 },
                    { text: "–¢—ã –ø—Ä–æ —Ç—É —Å–∏–º–ø–∞—Ç–∏—á–Ω—É—é —Å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ? –ö–æ–Ω–µ—á–Ω–æ –∑–∞–º–µ—Ç–∏–ª!", next: 9, affection: 5 },
                    { text: "–ú–Ω–µ –Ω–µ–∫–æ–≥–¥–∞ –ø–æ —Å—Ç–æ—Ä–æ–Ω–∞–º —Å–º–æ—Ç—Ä–µ—Ç—å, —è —É—á—É—Å—å.", next: 11, affection: -5 }
                ]
            },
            // Choice 1 path
            {
                type: "dialog",
                speaker: "–ê—Ä–∏—Ñ",
                text: "–ù—É —Ç—ã –¥–∞—ë—à—å! –û–Ω–∞ –∂–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Ä—è–¥–æ–º —Å—Ç–æ–∏—Ç! –í –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∫–æ–ª–ª–µ–¥–∂ –µ–∑–¥–∏—Ç. –ù–∞—Ä–≥–∏–∑–∞ –µ—ë –∑–æ–≤—É—Ç, –∫–∞–∂–µ—Ç—Å—è.",
                background: "bg-bus-stop",
                characters: ["arif"],
                nextScene: 13
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–ù–∞—Ä–≥–∏–∑–∞... –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –∏–º—è.",
                background: "bg-bus-stop",
                characters: ["arif"],
                nextScene: 13
            },
            // Choice 2 path
            {
                type: "dialog",
                speaker: "–ê—Ä–∏—Ñ",
                text: "–û-–æ-–æ! –¢–∞–∫ —Ç—ã —É–∂–µ –≥–ª–∞–∑ –ø–æ–ª–æ–∂–∏–ª! –•–∞-—Ö–∞! –ï—ë –ù–∞—Ä–≥–∏–∑–∞ –∑–æ–≤—É—Ç, –≤ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–º —É—á–∏—Ç—Å—è.",
                background: "bg-bus-stop",
                characters: ["arif"],
                nextScene: 13
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–î–∞ –ª–∞–¥–Ω–æ —Ç–µ–±–µ... –ü—Ä–æ—Å—Ç–æ –æ–Ω–∞... –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫-—Ç–æ.",
                background: "bg-bus-stop",
                characters: ["arif"],
                nextScene: 13
            },
            // Choice 3 path
            {
                type: "dialog",
                speaker: "–ê—Ä–∏—Ñ",
                text: "–≠—Ö, –ë–∏–±–∞—Ä—ã—Å... –¢–∞–∫ –≤—Å—é –∂–∏–∑–Ω—å –ø—Ä–æ—É—á–∏—à—å—Å—è –∏ –Ω–∏—á–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ –Ω–µ —É–≤–∏–¥–∏—à—å. –õ–∞–¥–Ω–æ, –º–æ–ª—á—É.",
                background: "bg-bus-stop",
                characters: ["arif"],
                nextScene: 13
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "(–ú–æ–∂–µ—Ç –æ–Ω –∏ –ø—Ä–∞–≤... –ù–æ –º–Ω–µ —Å–µ–π—á–∞—Å –Ω–µ –¥–æ —ç—Ç–æ–≥–æ.)",
                background: "bg-bus-stop",
                characters: ["arif"],
                nextScene: 13
            },
            // Continue story
            {
                type: "dialog",
                speaker: "",
                text: "–ò —Ç—É—Ç —è –µ—ë —É–≤–∏–¥–µ–ª. –û–Ω–∞ —à–ª–∞ –∫ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ, —É–∫—É—Ç–∞–Ω–Ω–∞—è –≤ –±–µ–∂–µ–≤–æ–µ –ø–∞–ª—å—Ç–æ. –î–ª–∏–Ω–Ω—ã–µ —Ç—ë–º–Ω—ã–µ –≤–æ–ª–æ—Å—ã —Ä–∞–∑–≤–µ–≤–∞–ª–∏—Å—å –Ω–∞ –≤–µ—Ç—Ä—É...",
                background: "bg-bus-stop",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "(–í–æ—Ç –æ–Ω–∞... –ù–∞—Ä–≥–∏–∑–∞. –¢–µ–ø–µ—Ä—å —è –ø–æ–Ω–∏–º–∞—é, –æ –∫–æ–º –≥–æ–≤–æ—Ä–∏–ª –ê—Ä–∏—Ñ. –ü–æ—á–µ–º—É —è —Ä–∞–Ω—å—à–µ –µ—ë –Ω–µ –∑–∞–º–µ—á–∞–ª?)",
                background: "bg-bus-stop",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ê—Ä–∏—Ñ",
                text: "*—à—ë–ø–æ—Ç–æ–º* –í–æ–Ω-–≤–æ–Ω, —Å–º–æ—Ç—Ä–∏! –ü–æ–¥–æ—à–ª–∞! –ò–¥–∏ –ø–æ–∑–¥–æ—Ä–æ–≤–∞–π—Å—è!",
                background: "bg-bus-stop",
                characters: ["nargiza", "arif"]
            },
            {
                type: "choice",
                question: "–ß—Ç–æ –¥–µ–ª–∞—Ç—å?",
                choices: [
                    { text: "–ü–æ–¥–æ–π—Ç–∏ –∏ –ø–æ–∑–¥–æ—Ä–æ–≤–∞—Ç—å—Å—è", next: 17, affection: 10 },
                    { text: "–ü–æ–¥–æ–∂–¥–∞—Ç—å —É–¥–æ–±–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞", next: 20, affection: 0 },
                    { text: "–°–¥–µ–ª–∞—Ç—å –≤–∏–¥, —á—Ç–æ –Ω–µ –∑–∞–º–µ—á–∞—é", next: 22, affection: -10 }
                ]
            },
            // Choice: Say hello
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–ü-–ø—Ä–∏–≤–µ—Ç! –¢—ã —Ç–æ–∂–µ –Ω–∞ 101-–π –∂–¥—ë—à—å?",
                background: "bg-bus-stop",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*—É–¥–∏–≤–ª—ë–Ω–Ω–æ* –û, –ø—Ä–∏–≤–µ—Ç! –î–∞, –≤ –ñ–µ–∑–∫–∞–∑–≥–∞–Ω –µ–¥—É. –í –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∫–æ–ª–ª–µ–¥–∂.",
                background: "bg-bus-stop",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*—É–ª—ã–±–∞–µ—Ç—Å—è* –ú—ã, –∫–∞–∂–µ—Ç—Å—è, –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ –æ–¥–Ω–æ –≤—Ä–µ–º—è –∑–¥–µ—Å—å –≤—Å—Ç—Ä–µ—á–∞–µ–º—Å—è. –Ø —Ç–µ–±—è —Ç–æ–∂–µ –∑–∞–º–µ—á–∞–ª–∞.",
                background: "bg-bus-stop",
                characters: ["nargiza"],
                nextScene: 24
            },
            // Choice: Wait
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "(–õ—É—á—à–µ –ø–æ–¥–æ–∂–¥–∞—Ç—å... –°–µ–π—á–∞—Å –∫–∞–∫-—Ç–æ –Ω–µ—É–¥–æ–±–Ω–æ.)",
                background: "bg-bus-stop",
                characters: ["nargiza"],
                nextScene: 24
            },
            {
                type: "dialog",
                speaker: "",
                text: "–Ø –æ—Å—Ç–∞–ª—Å—è —Å—Ç–æ—è—Ç—å –Ω–∞ –º–µ—Å—Ç–µ. –ù–∞—Ä–≥–∏–∑–∞ –±—Ä–æ—Å–∏–ª–∞ –Ω–∞ –º–µ–Ω—è –∫–æ—Ä–æ—Ç–∫–∏–π –≤–∑–≥–ª—è–¥, –Ω–æ —Ç—É—Ç –∂–µ –æ—Ç–≤–µ—Ä–Ω—É–ª–∞—Å—å.",
                background: "bg-bus-stop",
                characters: ["nargiza"],
                nextScene: 24
            },
            // Choice: Ignore
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "(–ù–µ –±—É–¥—É –æ—Ç–≤–ª–µ–∫–∞—Ç—å—Å—è. –£—á—ë–±–∞ –≤–∞–∂–Ω–µ–µ.)",
                background: "bg-bus-stop",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ê—Ä–∏—Ñ",
                text: "*—Ç–∏—Ö–æ* –≠—Ö, —Ç—ã –±–µ–∑–Ω–∞–¥—ë–∂–µ–Ω...",
                background: "bg-bus-stop",
                characters: ["nargiza", "arif"],
                nextScene: 24
            },
            // Bus scene
            {
                type: "dialog",
                speaker: "",
                text: "–ê–≤—Ç–æ–±—É—Å 101 –ø–æ–¥—ä–µ—Ö–∞–ª. –ù–∞—Ä–æ–¥—É –±—ã–ª–æ –º–Ω–æ–≥–æ ‚Äî –æ–±—ã—á–Ω–æ–µ —É—Ç—Ä–æ –º–µ–∂–¥—É –°–∞—Ç–ø–∞–µ–≤–æ–º –∏ –ñ–µ–∑–∫–∞–∑–≥–∞–Ω–æ–º.",
                background: "bg-bus",
                characters: []
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "(–í –∞–≤—Ç–æ–±—É—Å–µ —Ç–µ—Å–Ω–æ... –û, –æ–Ω–∞ —Å–µ–ª–∞ —É –æ–∫–Ω–∞. –†—è–¥–æ–º —Å –Ω–µ–π —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ!)",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "choice",
                question: "–°–µ—Å—Ç—å —Ä—è–¥–æ–º —Å –ù–∞—Ä–≥–∏–∑–æ–π?",
                choices: [
                    { text: "–î–∞, —ç—Ç–æ –º–æ–π —à–∞–Ω—Å!", next: 27, affection: 10 },
                    { text: "–ù–µ—Ç, –ª—É—á—à–µ —Å—è–¥—É —Å –ê—Ä–∏—Ñ–æ–º", next: 32, affection: -5 }
                ]
            },
            // Sit with Nargiza
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–≠–º... –ó–¥–µ—Å—å —Å–≤–æ–±–æ–¥–Ω–æ?",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–î–∞, —Å–∞–¥–∏—Å—å! *—É–±–∏—Ä–∞–µ—Ç —Å—É–º–∫—É*",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–¢—ã –≤ –ü–æ–ª–∏—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –µ–¥–µ—à—å, –¥–∞? –Ø –≤–∏–¥–µ–ª–∞ —Ç–µ–±—è –≤–æ–∑–ª–µ —Ç–æ–≥–æ –∫–æ—Ä–ø—É—Å–∞ –ø–∞—Ä—É —Ä–∞–∑.",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–î–∞, —É—á—É—Å—å —Ç–∞–º. –ê —Ç—ã –≤ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–º, –≤–µ—Ä–Ω–æ? –ë—É–¥—É—â–∏–π –≤—Ä–∞—á?",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*—É–ª—ã–±–∞–µ—Ç—Å—è* –¢–∏–ø–∞ —Ç–æ–≥–æ. –•–æ—á—É —Å—Ç–∞—Ç—å —Ö–∏—Ä—É—Ä–≥–æ–º. –°–ª–æ–∂–Ω–æ, –Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ.",
                background: "bg-bus",
                characters: ["nargiza"],
                nextScene: 35
            },
            // Sit with Arif
            {
                type: "dialog",
                speaker: "–ê—Ä–∏—Ñ",
                text: "–°–µ—Ä—å—ë–∑–Ω–æ? –¢–∞–∫–æ–π —à–∞–Ω—Å —É–ø—É—Å–∫–∞–µ—à—å!",
                background: "bg-bus",
                characters: ["arif"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–î–∞ –ª–∞–¥–Ω–æ, –µ—â—ë —É—Å–ø–µ—é –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è...",
                background: "bg-bus",
                characters: ["arif"]
            },
            {
                type: "dialog",
                speaker: "",
                text: "–Ø –≤–∏–¥–µ–ª, –∫–∞–∫ –∫–∞–∫–æ–π-—Ç–æ –ø–∞—Ä–µ–Ω—å —Å–µ–ª —Ä—è–¥–æ–º —Å –ù–∞—Ä–≥–∏–∑–æ–π. –û–Ω–∏ –æ —á—ë–º-—Ç–æ –æ–∂–∏–≤–ª—ë–Ω–Ω–æ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–ª–∏. –ü–æ—á–µ–º—É-—Ç–æ –º–Ω–µ —Å—Ç–∞–ª–æ –Ω–µ –ø–æ —Å–µ–±–µ...",
                background: "bg-bus",
                characters: ["arif"],
                nextScene: 35
            },
            // Continue
            {
                type: "chapter",
                title: "–ì–ª–∞–≤–∞ 2: –°–ª—É—á–∞–π–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏",
                background: "bg-college"
            },
            {
                type: "dialog",
                speaker: "",
                text: "–ü—Ä–æ—à–ª–∞ –Ω–µ–¥–µ–ª—è. –ö–∞–∂–¥—ã–π –¥–µ–Ω—å —è –µ–∑–¥–∏–ª –Ω–∞ —Ç–æ–º –∂–µ –∞–≤—Ç–æ–±—É—Å–µ, –∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤–∏–¥–µ–ª –ù–∞—Ä–≥–∏–∑—É. –ú—ã –Ω–∞—á–∞–ª–∏ –∑–¥–æ—Ä–æ–≤–∞—Ç—å—Å—è...",
                background: "bg-college",
                characters: []
            },
            {
                type: "dialog",
                speaker: "–ê—Ä–∏—Ñ",
                text: "–°–ª—É—à–∞–π, –ë–∏–±–∞—Ä—ã—Å, –∑–∞–≤—Ç—Ä–∞ –∂–µ –≤—ã—Ö–æ–¥–Ω—ã–µ. –ú–æ–∂–µ—Ç, –≤ –ø–∞—Ä–∫ —Å—Ö–æ–¥–∏–º? –í –°–∞—Ç–ø–∞–µ–≤–µ –ø–æ–≥–æ–¥–∞ —Ö–æ—Ä–æ—à–∞—è –æ–±–µ—â–∞–µ—Ç—Å—è.",
                background: "bg-college",
                characters: ["arif"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–î–∞ –º–æ–∂–Ω–æ... –ê —á—Ç–æ —Ç–∞–º –¥–µ–ª–∞—Ç—å?",
                background: "bg-college",
                characters: ["arif"]
            },
            {
                type: "dialog",
                speaker: "–ê—Ä–∏—Ñ",
                text: "*—Ö–∏—Ç—Ä–æ —É–ª—ã–±–∞–µ—Ç—Å—è* –ù—É –º–∞–ª–æ –ª–∏... –í–¥—Ä—É–≥ –∫–æ–≥–æ-–Ω–∏–±—É–¥—å –≤—Å—Ç—Ä–µ—Ç–∏–º? –ù–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—É–¥–µ–Ω—Ç–∫—É –º–µ–¥–∫–æ–ª–ª–µ–¥–∂–∞?",
                background: "bg-college",
                characters: ["arif"]
            },
            {
                type: "choice",
                question: "–ü–æ–π—Ç–∏ –≤ –ø–∞—Ä–∫?",
                choices: [
                    { text: "–•–æ—Ä–æ—à–æ, —É–≥–æ–≤–æ—Ä–∏–ª!", next: 41, affection: 5, flag: "park_yes" },
                    { text: "–ù–µ, –ª—É—á—à–µ –¥–æ–º–∞ –ø–æ—Å–∏–∂—É", next: 45, affection: -10, flag: "park_no" }
                ]
            },
            // Park scene
            {
                type: "dialog",
                speaker: "",
                text: "–°—É–±–±–æ—Ç–∞. –ü–∞—Ä–∫ –≤ –°–∞—Ç–ø–∞–µ–≤–µ. –û—Å–µ–Ω–Ω–∏–µ –ª–∏—Å—Ç—å—è —à—É—Ä—à–∞—Ç –ø–æ–¥ –Ω–æ–≥–∞–º–∏...",
                background: "bg-park",
                characters: []
            },
            {
                type: "dialog",
                speaker: "–ê—Ä–∏—Ñ",
                text: "–û–≥–æ, —Å–º–æ—Ç—Ä–∏ –∫—Ç–æ —Ç–∞–º! –≠—Ç–æ –∂–µ –ù–∞—Ä–≥–∏–∑–∞!",
                background: "bg-park",
                characters: ["arif"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–û! –ü—Ä–∏–≤–µ—Ç! –í—ã —Ç–æ–∂–µ –≥—É–ª—è–µ—Ç–µ?",
                background: "bg-park",
                characters: ["nargiza", "arif"]
            },
            {
                type: "dialog",
                speaker: "–ê—Ä–∏—Ñ",
                text: "–ê–≥–∞! –°–ª—É—à–∞–π—Ç–µ, –º–Ω–µ —Ç—É—Ç... —ç—ç—ç... –º–∞–º–∞ –∑–≤–æ–Ω–∏—Ç! –Ø –æ—Ç–æ–π–¥—É! *—É–±–µ–≥–∞–µ—Ç*",
                background: "bg-park",
                characters: ["nargiza"],
                nextScene: 48
            },
            // Stayed home
            {
                type: "dialog",
                speaker: "",
                text: "–Ø –æ—Å—Ç–∞–ª—Å—è –¥–æ–º–∞. –ò–≥—Ä–∞–ª –≤ –∏–≥—Ä—ã, —Å–º–æ—Ç—Ä–µ–ª –≤–∏–¥–µ–æ... –ù–æ –ø–æ—á–µ–º—É-—Ç–æ –±—ã–ª–æ —Å–∫—É—á–Ω–æ.",
                background: "bg-night",
                characters: []
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "(–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, —á—Ç–æ –ù–∞—Ä–≥–∏–∑–∞ —Å–µ–π—á–∞—Å –¥–µ–ª–∞–µ—Ç? –ú–æ–∂–µ—Ç, –∑—Ä—è –Ω–µ –ø–æ—à—ë–ª...)",
                background: "bg-night",
                characters: [],
                nextScene: 56
            },
            {
                type: "dialog",
                speaker: "",
                text: "–í –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ –∞–≤—Ç–æ–±—É—Å–µ –ù–∞—Ä–≥–∏–∑–∞ –±—ã–ª–∞ —Å –∫–∞–∫–∏–º-—Ç–æ –ø–∞—Ä–Ω–µ–º. –û–Ω–∏ —Å–º–µ—è–ª–∏—Å—å...",
                background: "bg-bus",
                characters: ["nargiza"],
                nextScene: 56
            },
            // Alone with Nargiza
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*—Å–º–µ—ë—Ç—Å—è* –ö–∞–∫–æ–π —É —Ç–µ–±—è –¥—Ä—É–≥... –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π.",
                background: "bg-park",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–î–∞ —É–∂, –ê—Ä–∏—Ñ —Ç–∞–∫–æ–π... –°–ª—É—à–∞–π, —Ä–∞–∑ —É–∂ –º—ã –∑–¥–µ—Å—å... –ú–æ–∂–µ—Ç, –ø—Ä–æ–π–¥—ë–º—Å—è?",
                background: "bg-park",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–° —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º! –Ø —Ç–∞–∫ —Ä–∞–¥–∞, —á—Ç–æ –≤ –°–∞—Ç–ø–∞–µ–≤–µ –µ—Å—Ç—å —Ç–∞–∫–æ–π –ø–∞—Ä–∫. –ü–æ—Å–ª–µ –ñ–µ–∑–∫–∞–∑–≥–∞–Ω–∞ —Ö–æ—á–µ—Ç—Å—è –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –æ—Ç –≥–æ—Ä–æ–¥–∞.",
                background: "bg-park",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–¢—ã –¥–∞–≤–Ω–æ –∑–¥–µ—Å—å –∂–∏–≤—ë—à—å? –í –°–∞—Ç–ø–∞–µ–≤–µ?",
                background: "bg-park",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–í—Å—é –∂–∏–∑–Ω—å. –ú–æ–∏ —Ä–æ–¥–∏—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –∫–æ–º–±–∏–Ω–∞—Ç–µ. –ê —Ç—ã?",
                background: "bg-park",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–¢–æ–∂–µ –º–µ—Å—Ç–Ω—ã–π. –ü–æ–ª—É—á–∞–µ—Ç—Å—è, –º—ã –º–æ–≥–ª–∏ —Ä–∞–Ω—å—à–µ –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è, –Ω–æ –∫–∞–∫-—Ç–æ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞–ª–∏—Å—å.",
                background: "bg-park",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–°—É–¥—å–±–∞! *—É–ª—ã–±–∞–µ—Ç—Å—è* –ó–Ω–∞—á–∏—Ç, –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –±—ã–ª–æ.",
                background: "bg-evening",
                characters: ["nargiza"]
            },
            {
                type: "choice",
                question: "–ú–æ–º–µ–Ω—Ç –æ—á–µ–Ω—å —Ä–æ–º–∞–Ω—Ç–∏—á–Ω—ã–π. –ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å?",
                choices: [
                    { text: "\"–¢—ã –æ—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤–∞—è —Å–µ–≥–æ–¥–Ω—è...\"", next: 57, affection: 15 },
                    { text: "\"–ú–æ–∂–µ—Ç, –æ–±–º–µ–Ω—è–µ–º—Å—è –Ω–æ–º–µ—Ä–∞–º–∏?\"", next: 60, affection: 10 },
                    { text: "\"–ù—É –¥–∞, —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ...\" *–º–æ–ª—á–∞—Ç—å*", next: 63, affection: -5 }
                ]
            },
            // Romantic choice
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*–∫—Ä–∞—Å–Ω–µ–µ—Ç* –ß-—á—Ç–æ? –≠—Ç–æ —Ç–∞–∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ...",
                background: "bg-evening",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–°–ø–∞—Å–∏–±–æ... –¢—ã —Ç–æ–∂–µ –Ω–∏—á–µ–≥–æ. *—Å–º—É—â—ë–Ω–Ω–æ –æ—Ç–≤–æ–¥–∏—Ç –≤–∑–≥–ª—è–¥*",
                background: "bg-evening",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "(–°–µ—Ä–¥—Ü–µ –±—å—ë—Ç—Å—è —Ç–∞–∫ –≥—Ä–æ–º–∫–æ... –ö–∞–∂–µ—Ç—Å—è, –æ–Ω–∞ —Ç–æ–∂–µ —Å–º—É—Ç–∏–ª–∞—Å—å!)",
                background: "bg-evening",
                characters: ["nargiza"],
                nextScene: 66
            },
            // Phone number
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–û, —Ö–æ—Ä–æ—à–∞—è –∏–¥–µ—è! –î–∞–≤–∞–π! –ü–∏—à–∏: 8-7...",
                background: "bg-evening",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–ó–∞–ø–∏—Å–∞–ª! –Ø –Ω–∞–ø–∏—à—É —Ç–µ–±–µ —Å–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä–æ–º.",
                background: "bg-evening",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*—É–ª—ã–±–∞–µ—Ç—Å—è* –ë—É–¥—É –∂–¥–∞—Ç—å.",
                background: "bg-evening",
                characters: ["nargiza"],
                nextScene: 66
            },
            // Awkward silence
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "...",
                background: "bg-evening",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–ù—É –ª–∞–¥–Ω–æ... –ú–Ω–µ –ø–æ—Ä–∞, –Ω–∞–≤–µ—Ä–Ω–æ–µ. –ü–æ–∫–∞!",
                background: "bg-evening",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "(–ß—ë—Ä—Ç, –Ω–∞–¥–æ –±—ã–ª–æ —á—Ç–æ-—Ç–æ —Å–∫–∞–∑–∞—Ç—å! –ö–∞–∫–æ–π –∂–µ —è –∏–¥–∏–æ—Ç...)",
                background: "bg-evening",
                characters: [],
                nextScene: 66
            },
            // Chapter 3
            {
                type: "chapter",
                title: "–ì–ª–∞–≤–∞ 3: –ß—É–≤—Å—Ç–≤–∞",
                background: "bg-night"
            },
            {
                type: "dialog",
                speaker: "",
                text: "–ü—Ä–æ—à—ë–ª –º–µ—Å—è—Ü. –ú—ã —Å –ù–∞—Ä–≥–∏–∑–æ–π —Å—Ç–∞–ª–∏ –æ–±—â–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å. –í –∞–≤—Ç–æ–±—É—Å–µ –≤—Å–µ–≥–¥–∞ —Å–∞–¥–∏–ª–∏—Å—å –≤–º–µ—Å—Ç–µ...",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–ó–Ω–∞–µ—à—å, —É –Ω–∞—Å —Å–∫–æ—Ä–æ —Å–µ—Å—Å–∏—è. –¢–∞–∫–æ–π —Å—Ç—Ä–µ—Å—Å! –°—Ç–æ–ª—å–∫–æ –≤—Å–µ–≥–æ —É—á–∏—Ç—å...",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–î–∞, –≤ –ü–æ–ª–∏—Ç–µ—Ö–µ —Ç–æ–∂–µ –∂–µ—Å—Ç—å. –û—Å–æ–±–µ–Ω–Ω–æ —Å —á–µ—Ä—á–µ–Ω–∏–µ–º –∑–∞–º—É—á–∏–ª–∏.",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–°–ª—É—à–∞–π... –ï—Å–ª–∏ –Ω–µ —Å–ª–æ–∂–Ω–æ... –ú–æ–∂–µ—à—å –ø–æ–º–æ—á—å –º–Ω–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å —Ñ–∏–∑–∏–∫–æ–π? –Ø –≤–æ–æ–±—â–µ –Ω–µ –ø–æ–Ω–∏–º–∞—é —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ!",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "choice",
                question: "–ü–æ–º–æ—á—å –ù–∞—Ä–≥–∏–∑–µ —Å —Ñ–∏–∑–∏–∫–æ–π?",
                choices: [
                    { text: "–ö–æ–Ω–µ—á–Ω–æ! –ú–æ–∂–µ–º –≤ –∫–∞—Ñ–µ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è –ø–æ—Å–ª–µ –ø–∞—Ä", next: 72, affection: 15 },
                    { text: "–î–∞–≤–∞–π, –Ω–æ —Ç–æ–ª—å–∫–æ –æ–Ω–ª–∞–π–Ω –æ–±—ä—è—Å–Ω—é", next: 75, affection: 5 },
                    { text: "–ò–∑–≤–∏–Ω–∏, —Å–∞–º–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç", next: 77, affection: -20 }
                ]
            },
            // Cafe date
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*—Ä–∞–¥–æ—Å—Ç–Ω–æ* –ü—Ä–∞–≤–¥–∞? –≠—Ç–æ –±—ã–ª–æ –±—ã —Å—É–ø–µ—Ä! –í –∫–∞–∫–æ–º –∫–∞—Ñ–µ? –í –ñ–µ–∑–∫–∞–∑–≥–∞–Ω–µ –∏–ª–∏ –≤ –°–∞—Ç–ø–∞–µ–≤–µ?",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–î–∞–≤–∞–π –≤ –°–∞—Ç–ø–∞–µ–≤–µ, –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤–µ—Ä–Ω—ë–º—Å—è. –¢–∞–º –µ—Å—Ç—å —É—é—Ç–Ω–æ–µ –º–µ—Å—Ç–æ —É —Ü–µ–Ω—Ç—Ä–∞.",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–û—Ç–ª–∏—á–Ω–æ! –≠—Ç–æ –∫–∞–∫... —Å–≤–∏–¥–∞–Ω–∏–µ? *—Å–º—É—â—ë–Ω–Ω–æ —Å–º–µ—ë—Ç—Å—è*",
                background: "bg-bus",
                characters: ["nargiza"],
                nextScene: 80
            },
            // Online help
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–ê... –õ–∞–¥–Ω–æ, —Ç–æ–∂–µ –≤–∞—Ä–∏–∞–Ω—Ç. –°–ø–∞—Å–∏–±–æ.",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "(–ö–∞–∂–µ—Ç—Å—è, –æ–Ω–∞ —Ä–∞—Å—Å—Ç—Ä–æ–∏–ª–∞—Å—å... –ú–æ–∂–µ—Ç, –Ω–∞–¥–æ –±—ã–ª–æ —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è –Ω–∞ –≤—Å—Ç—Ä–µ—á—É?)",
                background: "bg-bus",
                characters: ["nargiza"],
                nextScene: 80
            },
            // Reject
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–û... –ü–æ–Ω—è—Ç–Ω–æ. –ù—É –ª–∞–¥–Ω–æ, —è –ø–æ–ø—Ä–æ—à—É –∫–æ–≥–æ-–Ω–∏–±—É–¥—å –¥—Ä—É–≥–æ–≥–æ.",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "",
                text: "–û–Ω–∞ –æ—Ç–≤–µ—Ä–Ω—É–ª–∞—Å—å –∫ –æ–∫–Ω—É. –û—Å—Ç–∞—Ç–æ–∫ –ø—É—Ç–∏ –º—ã –µ—Ö–∞–ª–∏ –º–æ–ª—á–∞. –Ø —á—É–≤—Å—Ç–≤–æ–≤–∞–ª, —á—Ç–æ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å...",
                background: "bg-bus",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "(–ü–æ—á–µ–º—É —è —Ç–∞–∫ —Å–∫–∞–∑–∞–ª? –≠—Ç–æ –∂–µ –±—ã–ª —à–∞–Ω—Å –ø–æ–±—ã—Ç—å —Å –Ω–µ–π –Ω–∞–µ–¥–∏–Ω–µ...)",
                background: "bg-bus",
                characters: ["nargiza"],
                nextScene: 80
            },
            // Cafe scene
            {
                type: "dialog",
                speaker: "",
                text: "–í–µ—á–µ—Ä —Ç–æ–≥–æ –∂–µ –¥–Ω—è. –ö–∞—Ñ–µ –≤ —Ü–µ–Ω—Ç—Ä–µ –°–∞—Ç–ø–∞–µ–≤–∞...",
                background: "bg-cafe",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–ê–∞–∞, —Ç–∞–∫ –≤–æ—Ç –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç! –¢–µ–ø–µ—Ä—å –ø–æ–Ω—è—Ç–Ω–æ! –¢—ã —Ö–æ—Ä–æ—à–æ –æ–±—ä—è—Å–Ω—è–µ—à—å.",
                background: "bg-cafe",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–î–∞ —ç—Ç–æ –Ω–µ —Ç–∞–∫ —Å–ª–æ–∂–Ω–æ, –∫–æ–≥–¥–∞ –ø–æ–Ω–∏–º–∞–µ—à—å –ª–æ–≥–∏–∫—É. –¢—ã —É–º–Ω–∞—è, –ø—Ä–æ—Å—Ç–æ —Ç–µ–±–µ –Ω–µ —Ç–∞–∫ –æ–±—ä—è—Å–Ω–∏–ª–∏.",
                background: "bg-cafe",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*—É–ª—ã–±–∞–µ—Ç—Å—è* –°–ø–∞—Å–∏–±–æ... –ë–∏–±–∞—Ä—ã—Å, –∞ –º–æ–∂–Ω–æ —Å–ø—Ä–æ—Å–∏—Ç—å –∫–æ–µ-—á—Ç–æ –ª–∏—á–Ω–æ–µ?",
                background: "bg-cafe",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–ö–æ–Ω–µ—á–Ω–æ, —Å–ø—Ä–∞—à–∏–≤–∞–π.",
                background: "bg-cafe",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–£ —Ç–µ–±—è... –µ—Å—Ç—å –∫—Ç–æ-–Ω–∏–±—É–¥—å? –ù—É, –¥–µ–≤—É—à–∫–∞?",
                background: "bg-cafe",
                characters: ["nargiza"]
            },
            {
                type: "choice",
                question: "–ö–∞–∫ –æ—Ç–≤–µ—Ç–∏—Ç—å?",
                choices: [
                    { text: "\"–ù–µ—Ç. –ù–æ –µ—Å—Ç—å –æ–¥–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è –º–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è...\" *—Å–º–æ—Ç—Ä–µ—Ç—å –µ–π –≤ –≥–ª–∞–∑–∞*", next: 87, affection: 20 },
                    { text: "\"–ù–µ—Ç, –ø–æ–∫–∞ –Ω–µ—Ç\"", next: 90, affection: 5 },
                    { text: "\"–ê –ø–æ—á–µ–º—É —Ç—ã —Å–ø—Ä–∞—à–∏–≤–∞–µ—à—å?\" *—É–π—Ç–∏ –æ—Ç –æ—Ç–≤–µ—Ç–∞*", next: 92, affection: 0 }
                ]
            },
            // Confession hint
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*–∫—Ä–∞—Å–Ω–µ–µ—Ç* –ò... –∫—Ç–æ –æ–Ω–∞?",
                background: "bg-cafe",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–î—É–º–∞—é, —Ç—ã –¥–æ–≥–∞–¥—ã–≤–∞–µ—à—å—Å—è...",
                background: "bg-cafe",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*—Ç–∏—Ö–æ* –ë–∏–±–∞—Ä—ã—Å...",
                background: "bg-cafe",
                characters: ["nargiza"],
                nextScene: 95
            },
            // Simple no
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–ü–æ–Ω—è—Ç–Ω–æ... *–∑–∞–≥–∞–¥–æ—á–Ω–æ —É–ª—ã–±–∞–µ—Ç—Å—è*",
                background: "bg-cafe",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–ê —Ç—ã?",
                background: "bg-cafe",
                characters: ["nargiza"],
                nextScene: 95
            },
            // Deflect
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–ü—Ä–æ—Å—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ... *–æ—Ç–≤–æ–¥–∏—Ç –≤–∑–≥–ª—è–¥*",
                background: "bg-cafe",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "(–ö–∞–∂–µ—Ç—Å—è, –æ–Ω–∞ —Ö–æ—Ç–µ–ª–∞ —É—Å–ª—ã—à–∞—Ç—å —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ...)",
                background: "bg-cafe",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–õ–∞–¥–Ω–æ, –Ω–µ–≤–∞–∂–Ω–æ. –î–∞–≤–∞–π –¥–∞–ª—å—à–µ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è.",
                background: "bg-cafe",
                characters: ["nargiza"],
                nextScene: 95
            },
            // Final chapter
            {
                type: "chapter",
                title: "–ì–ª–∞–≤–∞ 4: –†–∞–∑–≤—è–∑–∫–∞",
                background: "bg-evening"
            },
            {
                type: "dialog",
                speaker: "",
                text: "–ó–∏–º–∞ –≤ –£–ª—ã—Ç–∞—É—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏. –°–Ω–µ–≥ —É–∫—Ä—ã–ª –°–∞—Ç–ø–∞–µ–≤ –±–µ–ª—ã–º –æ–¥–µ—è–ª–æ–º. –ù–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ 101 –º–∞—Ä—à—Ä—É—Ç–∞...",
                background: "bg-night",
                characters: []
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–ë–∏–±–∞—Ä—ã—Å! *–º–∞—à–µ—Ç —Ä—É–∫–æ–π* –•–æ–ª–æ–¥–Ω–æ —Å–µ–≥–æ–¥–Ω—è, –¥–∞?",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–û—á–µ–Ω—å. –•–æ—Ä–æ—à–æ, —á—Ç–æ –∞–≤—Ç–æ–±—É—Å –æ–±—ã—á–Ω–æ —Ç—ë–ø–ª—ã–π.",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*—ë–∂–∏—Ç—Å—è* –ó–Ω–∞–µ—à—å... –ú–Ω–µ –Ω—É–∂–Ω–æ —Ç–µ–±–µ —á—Ç–æ-—Ç–æ —Å–∫–∞–∑–∞—Ç—å.",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–ß—Ç–æ —Ç–∞–∫–æ–µ?",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "–Ø... –≠—Ç–∏ –º–µ—Å—è—Ü—ã —Å —Ç–æ–±–æ–π... –ü–æ–µ–∑–¥–∫–∏ –≤ –∞–≤—Ç–æ–±—É—Å–µ, –Ω–∞—à–∏ –≤—Å—Ç—Ä–µ—á–∏... –≠—Ç–æ –±—ã–ª–æ –ª—É—á—à–µ–µ –≤—Ä–µ–º—è –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏.",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*—Å–º–æ—Ç—Ä–∏—Ç –ø—Ä—è–º–æ –≤ –≥–ª–∞–∑–∞* –ë–∏–±–∞—Ä—ã—Å, —Ç—ã –Ω—Ä–∞–≤–∏—à—å—Å—è –º–Ω–µ. –û—á–µ–Ω—å.",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "choice",
                question: "–≠—Ç–æ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ! –ß—Ç–æ –æ—Ç–≤–µ—Ç–∏—Ç—å?",
                choices: [
                    { text: "\"–ù–∞—Ä–≥–∏–∑–∞... –¢—ã —Ç–æ–∂–µ –º–Ω–µ –Ω—Ä–∞–≤–∏—à—å—Å—è. –î–∞–≤–Ω–æ.\"", next: 104, affection: 25, flag: "confession_accept" },
                    { text: "\"–Ø... –º–Ω–µ –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è –ø–æ–¥—É–º–∞—Ç—å\"", next: 109, affection: -10, flag: "confession_delay" },
                    { text: "\"–ò–∑–≤–∏–Ω–∏, —è –¥—É–º–∞—é –æ —Ç–µ–±–µ —Ç–æ–ª—å–∫–æ –∫–∞–∫ –æ –¥—Ä—É–≥–µ\"", next: 113, affection: -30, flag: "confession_reject" }
                ]
            },
            // Accept confession - Good Ending path
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*–≥–ª–∞–∑–∞ —Å–≤–µ—Ç—è—Ç—Å—è* –ü—Ä–∞–≤–¥–∞?!",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–ü—Ä–∞–≤–¥–∞. –° —Ç–æ–≥–æ —Å–∞–º–æ–≥–æ –¥–Ω—è, –∫–æ–≥–¥–∞ –º—ã –≤–ø–µ—Ä–≤—ã–µ –∑–∞–≥–æ–≤–æ—Ä–∏–ª–∏ –Ω–∞ —ç—Ç–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–µ... –ù–µ—Ç, –µ—â—ë —Ä–∞–Ω—å—à–µ. –ö–æ–≥–¥–∞ —è —É–≤–∏–¥–µ–ª —Ç–µ–±—è –≤–ø–µ—Ä–≤—ã–µ.",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*–æ–±–Ω–∏–º–∞–µ—Ç* –Ø —Ç–∞–∫ —Å—á–∞—Å—Ç–ª–∏–≤–∞... –¢–∞–∫ —Å—á–∞—Å—Ç–ª–∏–≤–∞!",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–ù–∞—Ä–≥–∏–∑–∞... –ë—É–¥—å –º–æ–µ–π –¥–µ–≤—É—à–∫–æ–π?",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*—Å–∫–≤–æ–∑—å —Å–ª—ë–∑—ã —Ä–∞–¥–æ—Å—Ç–∏* –î–∞! –î–∞, –∫–æ–Ω–µ—á–Ω–æ –¥–∞!",
                background: "bg-night",
                characters: ["nargiza"],
                nextScene: "good_ending"
            },
            // Delay - Neutral/Bad ending
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*—É–ª—ã–±–∫–∞ –≥–∞—Å–Ω–µ—Ç* –í—Ä–µ–º—è?.. –ü–æ–Ω—è—Ç–Ω–æ...",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–ù–µ—Ç, —Ç—ã –Ω–µ —Ç–∞–∫ –ø–æ–Ω—è–ª–∞! –ü—Ä–æ—Å—Ç–æ —ç—Ç–æ —Ç–∞–∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ...",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*–≥—Ä—É—Å—Ç–Ω–æ* –í—Å—ë –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –Ø –ø–æ–¥–æ–∂–¥—É. –ù–æ... –Ω–µ —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ, —Ö–æ—Ä–æ—à–æ?",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "",
                text: "–û–Ω–∞ —Å–µ–ª–∞ –≤ –∞–≤—Ç–æ–±—É—Å. –Ø –æ—Å—Ç–∞–ª—Å—è —Å—Ç–æ—è—Ç—å –Ω–∞ –º–æ—Ä–æ–∑–µ, –Ω–µ –∑–Ω–∞—è, —á—Ç–æ –¥–µ–ª–∞—Ç—å...",
                background: "bg-night",
                characters: [],
                nextScene: "neutral_ending"
            },
            // Reject - Bad ending
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*–≥–æ–ª–æ—Å –¥—Ä–æ–∂–∏—Ç* –ö–∞–∫... –¥—Ä—É–≥–µ?",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ë–∏–±–∞—Ä—ã—Å",
                text: "–ò–∑–≤–∏–Ω–∏... –Ø –Ω–µ —Ö–æ—Ç–µ–ª —Ç–µ–±—è —Ä–∞–Ω–∏—Ç—å.",
                background: "bg-night",
                characters: ["nargiza"]
            },
            {
                type: "dialog",
                speaker: "–ù–∞—Ä–≥–∏–∑–∞",
                text: "*—Å–ª—ë–∑—ã –Ω–∞ –≥–ª–∞–∑–∞—Ö* –Ø... —è –ø–æ–Ω–∏–º–∞—é. –°–ø–∞—Å–∏–±–æ –∑–∞ —á–µ—Å—Ç–Ω–æ—Å—Ç—å. –ü–æ–∫–∞.",
                background: "bg-rain",
                characters: []
            },
            {
                type: "dialog",
                speaker: "",
                text: "–û–Ω–∞ —É–±–µ–∂–∞–ª–∞, –Ω–µ –¥–æ–∂–¥–∞–≤—à–∏—Å—å –∞–≤—Ç–æ–±—É—Å–∞. –Ø —Å—Ç–æ—è–ª –æ–¥–∏–Ω –Ω–∞ —Ö–æ–ª–æ–¥–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–µ, –ø–æ–Ω–∏–º–∞—è, —á—Ç–æ –ø–æ—Ç–µ—Ä—è–ª —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ...",
                background: "bg-rain",
                characters: [],
                nextScene: "bad_ending"
            }
        ];

        // Endings
        const endings = {
            good_ending: {
                type: "good",
                title: "–•–û–†–û–®–ê–Ø –ö–û–ù–¶–û–í–ö–ê",
                subtitle: "\"–°–µ—Ä–¥—Ü–µ –°–∞—Ç–ø–∞–µ–≤–∞\"\n\n–ú—ã —Å –ù–∞—Ä–≥–∏–∑–æ–π –Ω–∞—á–∞–ª–∏ –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è. –ö–∞–∂–¥–æ–µ —É—Ç—Ä–æ –≤ –∞–≤—Ç–æ–±—É—Å–µ 101 —Ç–µ–ø–µ—Ä—å –±—ã–ª–æ –Ω–∞–ø–æ–ª–Ω–µ–Ω–æ —Å—á–∞—Å—Ç—å–µ–º. –û–Ω–∞ –¥–µ—Ä–∂–∞–ª–∞ –º–µ–Ω—è –∑–∞ —Ä—É–∫—É, –ø–æ–∫–∞ –º—ã –µ—Ö–∞–ª–∏ –∏–∑ –°–∞—Ç–ø–∞–µ–≤–∞ –≤ –ñ–µ–∑–∫–∞–∑–≥–∞–Ω.\n\n–ê—Ä–∏—Ñ —à—É—Ç–∏–ª, —á—Ç–æ –æ–Ω –±—ã–ª –ª—É—á—à–∏–º –¥—Ä—É–≥–æ–º-—Å–≤–∞—Ö–æ–π. –ú–æ–∂–µ—Ç, –æ–Ω –∏ –ø—Ä–∞–≤.\n\n–ù–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è...\n\nüíï –°–ø–∞—Å–∏–±–æ –∑–∞ –∏–≥—Ä—É! üíï"
            },
            neutral_ending: {
                type: "bad",
                title: "–ù–ï–ô–¢–†–ê–õ–¨–ù–ê–Ø –ö–û–ù–¶–û–í–ö–ê",
                subtitle: "\"–£–ø—É—â–µ–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç\"\n\n–Ø —Ç–∞–∫ –∏ –Ω–µ –¥–∞–ª –µ–π –æ—Ç–≤–µ—Ç. –ß–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é —è —É–≤–∏–¥–µ–ª, –∫–∞–∫ –ù–∞—Ä–≥–∏–∑–∞ —à–ª–∞ –ø–æ–¥ —Ä—É–∫—É —Å –¥—Ä—É–≥–∏–º –ø–∞—Ä–Ω–µ–º. –û–Ω–∞ —É–ª—ã–±–∞–ª–∞—Å—å, –Ω–æ –∫–æ–≥–¥–∞ –Ω–∞—à–∏ –≥–ª–∞–∑–∞ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å ‚Äî –≤ –µ—ë –≤–∑–≥–ª—è–¥–µ –±—ã–ª–∞ –≥—Ä—É—Å—Ç—å.\n\n–ò–Ω–æ–≥–¥–∞ –º—ã –≤—Å—ë –µ—â—ë –µ–∑–¥–∏–º –≤ –æ–¥–Ω–æ–º –∞–≤—Ç–æ–±—É—Å–µ. –ù–æ —Å–∞–¥–∏–º—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ü–∞—Ö.\n\n–ú–æ–∂–µ—Ç, –µ—Å–ª–∏ –±—ã —è –±—ã–ª —Å–º–µ–ª–µ–µ...\n\nüíî –ö–æ–Ω–µ—Ü"
            },
            bad_ending: {
                type: "bad",
                title: "–ü–õ–û–•–ê–Ø –ö–û–ù–¶–û–í–ö–ê",
                subtitle: "\"–û–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ\"\n\n–ù–∞—Ä–≥–∏–∑–∞ –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ –µ–∑–¥–∏—Ç—å –Ω–∞ –∞–≤—Ç–æ–±—É—Å–µ 101. –ê—Äif —Å–∫–∞–∑–∞–ª, —á—Ç–æ –æ–Ω–∞ –ø–æ–ø—Ä–æ—Å–∏–ª–∞ —Ä–æ–¥–∏—Ç–µ–ª–µ–π –æ—Ç–≤–æ–∑–∏—Ç—å –µ—ë –Ω–∞ –º–∞—à–∏–Ω–µ.\n\n–Ø –ø–æ—Ç–µ—Ä—è–ª –µ—ë. –ò —Ç–æ–ª—å–∫–æ —Ç–µ–ø–µ—Ä—å –ø–æ–Ω—è–ª, —á—Ç–æ –æ–Ω–∞ –∑–Ω–∞—á–∏–ª–∞ –¥–ª—è –º–µ–Ω—è.\n\n–ê–≤—Ç–æ–±—É—Å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –°–∞—Ç–ø–∞–µ–≤–µ –∫–∞–∂–µ—Ç—Å—è —Ç–∞–∫–æ–π –ø—É—Å—Ç–æ–π –±–µ–∑ –Ω–µ—ë...\n\nüíî –ö–æ–Ω–µ—Ü"
            },
            very_bad_ending: {
                type: "bad",
                title: "–°–ê–ú–ê–Ø –ü–õ–û–•–ê–Ø –ö–û–ù–¶–û–í–ö–ê",
                subtitle: "\"–ß—É–∂–∏–µ\"\n\n–Ø —Ç–∞–∫ –∏ –Ω–µ —É–∑–Ω–∞–ª –µ—ë –∏–º—è. –î–µ–≤—É—à–∫–∞ —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ—Å—Ç–∞–ª–∞—Å—å –ø—Ä–æ—Å—Ç–æ –¥–µ–≤—É—à–∫–æ–π —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.\n\n–ê—Ä–∏—Ñ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —è –∑—Ä—è —Ç—Ä–∞—á—É –∂–∏–∑–Ω—å –Ω–∞ —É—á–µ–±–Ω–∏–∫–∏. –ú–æ–∂–µ—Ç, –æ–Ω –ø—Ä–∞–≤.\n\n–ù–æ —É–∂–µ —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ —á—Ç–æ-—Ç–æ –º–µ–Ω—è—Ç—å...\n\nüíî –ö–æ–Ω–µ—Ü"
            }
        };

        // Platform Selection
        function selectPlatform(platform) {
            gameState.platform = platform;
            if (platform === 'mobile') {
                document.body.classList.add('mobile-mode');
            }
            document.getElementById('platform-select').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            startGame();
        }

        // Start Game
        function startGame() {
            gameState.currentScene = 0;
            gameState.affection = 30;
            gameState.flags = {};
            showScene();
        }

        // Show Scene
        function showScene() {
            const scene = story[gameState.currentScene];
            if (!scene) {
                checkEnding();
                return;
            }

            if (scene.type === "chapter") {
                showChapterTitle(scene);
            } else if (scene.type === "dialog") {
                showDialog(scene);
            } else if (scene.type === "choice") {
                showChoices(scene);
            }
        }

        // Chapter Title
        function showChapterTitle(scene) {
            const chapterTitle = document.getElementById('chapter-title');
            const bg = document.getElementById('background');
            
            bg.className = 'background ' + scene.background;
            chapterTitle.textContent = scene.title;
            chapterTitle.style.opacity = '0';
            document.getElementById('dialog-box').style.display = 'none';
            
            // Animate
            setTimeout(() => {
                chapterTitle.style.transition = 'opacity 1s ease';
                chapterTitle.style.opacity = '1';
            }, 100);
            
            setTimeout(() => {
                chapterTitle.style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('dialog-box').style.display = 'block';
                    gameState.currentScene++;
                    showScene();
                }, 500);
            }, 2500);
        }

        // Show Dialog
        function showDialog(scene) {
            const bg = document.getElementById('background');
            const speakerName = document.getElementById('speaker-name');
            const dialogText = document.getElementById('dialog-text');
            const characterDisplay = document.getElementById('character-display');
            const choicesContainer = document.getElementById('choices-container');
            
            // Hide choices
            choicesContainer.style.display = 'none';
            
            // Set background
            if (scene.background) {
                bg.className = 'background ' + scene.background;
            }
            
            // Set speaker
            speakerName.textContent = scene.speaker || '–†–∞—Å—Å–∫–∞–∑—á–∏–∫';
            
            // Typewriter effect
            typeWriter(dialogText, scene.text);
            
            // Show characters
            updateCharacters(scene.characters || []);
            
            // Update affection
            updateAffection();
        }

        // Type Writer Effect
        function typeWriter(element, text, speed = 30) {
            element.textContent = '';
            let i = 0;
            
            function type() {
                if (i < text.length) {
                    element.textContent += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        // Update Characters
        function updateCharacters(characters) {
            const display = document.getElementById('character-display');
            display.innerHTML = '';
            
            characters.forEach(char => {
                const charDiv = document.createElement('div');
                charDiv.className = 'character fade-in';
                
                let emoji, name, colorClass;
                if (char === 'nargiza') {
                    emoji = 'üë©';
                    name = '–ù–∞—Ä–≥–∏–∑–∞';
                    colorClass = 'nargiza-avatar';
                } else if (char === 'arif') {
                    emoji = 'üë®';
                    name = '–ê—Ä–∏—Ñ';
                    colorClass = 'arif-avatar';
                }
                
                charDiv.innerHTML = `
                    <div class="character-sprite">
                        <div class="character-avatar ${colorClass}">${emoji}</div>
                        <div class="character-name-tag">${name}</div>
                    </div>
                `;
                display.appendChild(charDiv);
            });
        }

        // Show Choices
        function showChoices(scene) {
            const choicesContainer = document.getElementById('choices-container');
            const continueHint = document.getElementById('continue-hint');
            
            continueHint.style.display = 'none';
            choicesContainer.style.display = 'flex';
            choicesContainer.innerHTML = '';
            
            scene.choices.forEach((choice, index) => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn slide-up';
                btn.style.animationDelay = (index * 0.1) + 's';
                btn.textContent = choice.text;
                btn.onclick = () => makeChoice(choice);
                choicesContainer.appendChild(btn);
            });
        }

        // Make Choice
        function makeChoice(choice) {
            gameState.affection += choice.affection || 0;
            
            if (choice.flag) {
                gameState.flags[choice.flag] = true;
            }
            
            // Show heart animation for positive choices
            if (choice.affection > 0) {
                showHearts();
            }
            
            document.getElementById('choices-container').style.display = 'none';
            document.getElementById('continue-hint').style.display = 'block';
            
            gameState.currentScene = choice.next;
            showScene();
            updateAffection();
        }

        // Show Hearts Animation
        function showHearts() {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'heart-float';
                    heart.textContent = 'üíï';
                    heart.style.left = Math.random() * window.innerWidth + 'px';
                    heart.style.top = window.innerHeight * 0.5 + 'px';
                    document.body.appendChild(heart);
                    
                    setTimeout(() => heart.remove(), 2000);
                }, i * 100);
            }
        }

        // Advance Dialog
        function advanceDialog() {
            const scene = story[gameState.currentScene];
            if (!scene || scene.type === "choice" || scene.type === "chapter") return;
            
            if (scene.nextScene) {
                if (typeof scene.nextScene === 'string') {
                    showEnding(scene.nextScene);
                    return;
                }
                gameState.currentScene = scene.nextScene;
            } else {
                gameState.currentScene++;
            }
            
            showScene();
        }

        // Update Affection
        function updateAffection() {
            const fill = document.getElementById('affection-fill');
            let percentage = Math.max(0, Math.min(100, gameState.affection));
            fill.style.width = percentage + '%';
            
            // Change color based on level
            if (percentage < 30) {
                fill.style.background = 'linear-gradient(90deg, #636e72, #b2bec3)';
            } else if (percentage < 60) {
                fill.style.background = 'linear-gradient(90deg, #fdcb6e, #f39c12)';
            } else {
                fill.style.background = 'linear-gradient(90deg, #ff6b9d, #ff8fab)';
            }
        }

        // Check Ending
        function checkEnding() {
            if (gameState.affection >= 80) {
                showEnding('good_ending');
            } else if (gameState.affection >= 40) {
                showEnding('neutral_ending');
            } else if (gameState.affection >= 20) {
                showEnding('bad_ending');
            } else {
                showEnding('very_bad_ending');
            }
        }

        // Show Ending
        function showEnding(endingKey) {
            const ending = endings[endingKey];
            const endingScreen = document.getElementById('ending-screen');
            const endingTitle = endingScreen.querySelector('.ending-title');
            const endingSubtitle = endingScreen.querySelector('.ending-subtitle');
            
            endingScreen.className = ending.type === 'good' ? 'ending-good' : 'ending-bad';
            endingScreen.style.display = 'flex';
            endingTitle.textContent = ending.title;
            endingSubtitle.textContent = ending.subtitle;
        }

        // Menu Functions
        function toggleMenu() {
            const menu = document.getElementById('menu-overlay');
            menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
        }

        function saveGame() {
            localStorage.setItem('serdceSatpaeva', JSON.stringify(gameState));
            alert('–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
        }

        function loadGame() {
            const saved = localStorage.getItem('serdceSatpaeva');
            if (saved) {
                gameState = JSON.parse(saved);
                toggleMenu();
                showScene();
                updateAffection();
            } else {
                alert('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!');
            }
        }

        function restartGame() {
            document.getElementById('ending-screen').style.display = 'none';
            document.getElementById('menu-overlay').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            startGame();
        }

        function toggleAuto() {
            gameState.autoMode = !gameState.autoMode;
            document.getElementById('auto-btn').style.background = 
                gameState.autoMode ? 'rgba(255, 107, 157, 0.7)' : 'rgba(0, 0, 0, 0.7)';
            
            if (gameState.autoMode) {
                autoAdvance();
            }
        }

        function autoAdvance() {
            if (gameState.autoMode && story[gameState.currentScene]?.type !== 'choice') {
                setTimeout(() => {
                    advanceDialog();
                    autoAdvance();
                }, 3000);
            }
        }

        // Keyboard Controls
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' || e.code === 'Enter') {
                advanceDialog();
            } else if (e.code === 'Escape') {
                toggleMenu();
            }
        });
    </script>
</body>
</html>
